# locals
Python의 **지역 네임스페이스(local namespace)**를 다루는 핵심 함수인 locals()의 동작 원리를 보여줌.  
아래에 locals()의 개념, 동작 방식, 실무 활용, 주의점까지 자세히 정리.

## 🧠 핵심 개념: locals()란?
- 현재 **지역 스코프(local scope)**에 존재하는 모든 변수와 객체를 딕셔너리 형태로 반환하는 내장 함수
- 함수 내부에서 호출하면 해당 함수의 지역 변수, 인자, 내부 함수 등이 포함됨
- 전역 스코프에서는 globals()와 거의 동일한 결과를 반환함

## 🔍 예제 분석
```python
def func(var):
    x = 10
    def printer():
        print('Ex6 > ', "Printer Func Inner")
    print('Func Inner', locals())

```

- var: 함수 인자
- x: 함수 내부에서 선언된 지역 변수
- printer: 함수 내부에서 정의된 중첩 함수
### ✅ 출력 결과
```
{'var': 'Hi', 'x': 10, 'printer': <function func.<locals>.printer at 0x...>}
```

- locals()는 현재 함수의 모든 지역 요소를 딕셔너리로 보여줌
- 중첩 함수도 객체로 포함되어 있음 → <function func.<locals>.printer at ...>

### 📌 실무에서 왜 중요한가?
| 상황 또는 목적             | 설명                                                                 |
|----------------------------|----------------------------------------------------------------------|
| 디버깅 및 로깅              | 함수 내부에서 어떤 변수들이 정의되어 있는지 실시간으로 확인 가능             |
| 템플릿 렌더링               | Jinja2 같은 템플릿 엔진에 `locals()`를 넘기면 현재 함수의 컨텍스트를 그대로 전달 가능 |
| 클로저 상태 추적            | 클로저 내부에서 외부 변수 상태를 확인하거나 기록할 때 유용                   |
| 동적 로직 구성              | 지역 변수들을 기반으로 조건 분기나 동적 처리 로직을 구성할 수 있음            |
| 함수 내부 컨텍스트 캡처     | 함수 실행 중의 모든 지역 상태를 딕셔너리로 캡처하여 테스트나 분석에 활용 가능   |



### ⚠️ 실무 주의점
- locals()는 읽기 전용처럼 보이지만, 수정해도 실제 지역 변수에는 반영되지 않음
- 지역 스코프는 Python이 컴파일 타임에 고정하기 때문에 locals()를 수정해도 실행 흐름에는 영향 없음
- 반면 globals()는 실제 전역 네임스페이스를 수정할 수 있음

### 📊 구조 요약
locals() → {
    'var': 'Hi',
    'x': 10,
    'printer': <function printer>
}

### 🔍 locals() vs globals() 비교

| 항목               | `locals()`                                      | `globals()`                                      |
|--------------------|--------------------------------------------------|--------------------------------------------------|
| 대상 스코프         | 현재 **지역 스코프**                             | 현재 **전역 스코프**                             |
| 반환 형태           | 딕셔너리 (`dict`)                                | 딕셔너리 (`dict`)                                |
| 수정 가능 여부       | 읽기 전용 (실제 지역 변수에는 반영되지 않음)         | 수정 가능 (실제 전역 변수에 반영됨)               |
| 사용 위치           | 함수 내부에서 주로 사용                           | 모듈 전체 또는 함수 외부에서 사용                  |
| 포함 정보           | 함수 인자, 지역 변수, 내부 함수 등                 | 전역 변수, 함수, 클래스, 모듈 정보 등              |
| 실무 활용 예시       | 디버깅, 템플릿 렌더링, 클로저 상태 추적              | 동적 변수 생성, 테스트 환경 구성, 메타 프로그래밍    |
| 대표 사용 목적       | 현재 함수의 실행 컨텍스트 확인                     | 전체 모듈의 실행 환경 제어                         |



### ✅ 요약
- locals()는 함수 내부의 현재 상태를 딕셔너리로 확인할 수 있는 강력한 도구
- 디버깅, 로깅, 템플릿 렌더링, 클로저 상태 추적 등 다양한 실무 시나리오에서 유용
- 단, 수정은 불가능하므로 읽기 전용 도구로 활용하는 것이 안전함

---
