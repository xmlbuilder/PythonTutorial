 ## í•¨ìˆ˜ ê°ì²´ì˜ ì´ë¦„ ê³µê°„ì´ë€

- Pythonì—ì„œ í•¨ìˆ˜ëŠ” **ì¼ê¸‰ ê°ì²´(first-class object)** ì…ë‹ˆë‹¤.
- ì¦‰, ë³€ìˆ˜ì— í• ë‹¹í•˜ê±°ë‚˜, ì¸ìë¡œ ì „ë‹¬í•˜ê±°ë‚˜, ì†ì„±ì„ ì¶”ê°€í•  ìˆ˜ ìˆëŠ” ê°ì²´ì…ë‹ˆë‹¤.
- í•¨ìˆ˜ ê°ì²´ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ __dict__ë¼ëŠ” ì´ë¦„ ê³µê°„ì„ ê°€ì§€ê³  ìˆì–´, ì—¬ê¸°ì— ì‚¬ìš©ì ì •ì˜ ì†ì„±ì„ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ë’¤ì—ì„œ **ë°ì½”ë ˆì´í„°** ì™€ **í´ëŸ¬ì €** ëŠ” ë‹¤ì‹œ í•œë²ˆ ë‹¤ë£¹ë‹ˆë‹¤. ì—¬ê¸°ì„œ ì´í•´ë¥¼ ëª»í•˜ì…”ë„ ë©ë‹ˆë‹¤.

## ğŸ“Œ ìƒ˜í”Œ ì½”ë“œ ì„¤ëª…
### âŒ ì˜¤ë¥˜ ë°œìƒ ì˜ˆì‹œ
```python
def func(x, y):
    func.sum = func.sum + x + y
    return x + y

func(1, 5)  # AttributeError ë°œìƒ
```
- func.sumì´ ì •ì˜ë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— AttributeErrorê°€ ë°œìƒí•©ë‹ˆë‹¤.

### âœ… ì†ì„± ì´ˆê¸°í™” í›„ ì‚¬ìš©
```python
func.sum = 0
func(1, 5)
print(func.__dict__)  # {'sum': 6}

```
- func.sumì„ ë¨¼ì € ì •ì˜í•˜ë©´ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥.
- func.__dict__ë¥¼ í†µí•´ í•¨ìˆ˜ ê°ì²´ì˜ ì†ì„±ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### âœ… ë‚´ë¶€ì—ì„œ ì•ˆì „í•˜ê²Œ ì´ˆê¸°í™”
```python
def func1(x, y):
    if not hasattr(func1, 'sum'):
        func1.sum = 0
    func1.sum += x + y
    return x + y
```

- hasattrë¡œ ì†ì„± ì¡´ì¬ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê³  ì´ˆê¸°í™”í•˜ë©´ ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## âœ… ì‹¤ìš©ì ì¸ ì˜ˆì œ: í•¨ìˆ˜ ê°ì²´ë¥¼ í™œìš©í•œ ìƒíƒœ ì €ì¥

### 1. ğŸ“Š API í˜¸ì¶œ íšŸìˆ˜ ì¶”ì ê¸°
```python
def api_call(endpoint):
    if not hasattr(api_call, 'count'):
        api_call.count = 0
    api_call.count += 1
    print(f"[{api_call.count}] Calling {endpoint}")

api_call("/users")
api_call("/posts")
print(api_call.__dict__)  # {'count': 2}
```


### 2. ğŸ§® ëˆ„ì  í•© ê³„ì‚°ê¸°
```python
def accumulator(value):
    if not hasattr(accumulator, 'total'):
        accumulator.total = 0
    accumulator.total += value
    return accumulator.total

print(accumulator(10))  # 10
print(accumulator(5))   # 15
print(accumulator.__dict__)  # {'total': 15}
```

### 3. ğŸ§ª í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ í†µê³„ ìˆ˜ì§‘ê¸°
```python
def test_case(name, passed):
    if not hasattr(test_case, 'results'):
        test_case.results = {'pass': 0, 'fail': 0}
    if passed:
        test_case.results['pass'] += 1
    else:
        test_case.results['fail'] += 1
    print(f"Test {name}: {'PASS' if passed else 'FAIL'}")

test_case("Login", True)
test_case("Signup", False)
print(test_case.__dict__)  # {'results': {'pass': 1, 'fail': 1}}
```


## âš ï¸ ì£¼ì˜ì‚¬í•­
- í•¨ìˆ˜ ê°ì²´ì— ìƒíƒœë¥¼ ì €ì¥í•˜ëŠ” ë°©ì‹ì€ ê°„ë‹¨í•˜ê³  ìœ ìš©í•˜ì§€ë§Œ, ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ì´ë‚˜ í•¨ìˆ˜ ì¬ì‚¬ìš© ì‹œì—ëŠ”  
  **ë¶€ì‘ìš©(side effect)** ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ë” ì•ˆì „í•œ ë°©ì‹ì€ í´ë˜ìŠ¤ë‚˜ í´ë¡œì €(closure)ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

## ğŸ”š ë§ˆë¬´ë¦¬
í•¨ìˆ˜ ê°ì²´ì˜ ì´ë¦„ ê³µê°„ì„ í™œìš©í•˜ë©´ ê°„ë‹¨í•œ ìƒíƒœ ì¶”ì , ëˆ„ì  ê³„ì‚°, í†µê³„ ìˆ˜ì§‘ ë“±ì„ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆì–´ ì‹¤ë¬´ì—ì„œë„ ìœ ìš©í•©ë‹ˆë‹¤.  
í•˜ì§€ë§Œ ë³µì¡í•œ ë¡œì§ì´ë‚˜ ë³‘ë ¬ ì²˜ë¦¬ í™˜ê²½ì—ì„œëŠ” í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” ì•ˆì „í•©ë‹ˆë‹¤.


## ğŸ§± 1. í´ë˜ìŠ¤ ê¸°ë°˜ í™•ì¥: ìƒíƒœ ì¶”ì ê¸°
í´ë˜ìŠ¤ëŠ” ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê¸°ì— ê°€ì¥ ì í•©í•œ êµ¬ì¡°ì…ë‹ˆë‹¤.  
í•¨ìˆ˜ ê°ì²´ì— ì†ì„±ì„ ë¶™ì´ëŠ” ëŒ€ì‹ , í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¡œ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ë©´ ê°€ë…ì„±, í™•ì¥ì„±, í…ŒìŠ¤íŠ¸ì„±ì´ ëª¨ë‘ í–¥ìƒë©ë‹ˆë‹¤.

## âœ… ì˜ˆì œ: ëˆ„ì  í•© ê³„ì‚°ê¸°
```python
class Accumulator:
    def __init__(self):
        self.total = 0

    def add(self, x, y):
        result = x + y
        self.total += result
        return result

# ì‚¬ìš© ì˜ˆ
acc = Accumulator()
print(acc.add(1, 5))  # 6
print(acc.add(2, 3))  # 5
print(acc.total)      # 11
```

## ğŸ’¼ ì‹¤ë¬´ í™œìš©: API í˜¸ì¶œ íšŸìˆ˜ ì¶”ì ê¸°
```python
class APICounter:
    def __init__(self):
        self.count = 0

    def call(self, endpoint):
        self.count += 1
        print(f"[{self.count}] Calling {endpoint}")

api = APICounter()
api.call("/users")
api.call("/posts")
```

## ğŸ€ 2. ë°ì½”ë ˆì´í„° ê¸°ë°˜ í™•ì¥: í•¨ìˆ˜ì— ìƒíƒœ ì£¼ì…
ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ë©´ ê¸°ì¡´ í•¨ìˆ˜ë¥¼ ê°ì‹¸ì„œ ìƒíƒœë¥¼ ì£¼ì…í•˜ê±°ë‚˜ ì¶”ì í•  ìˆ˜ ìˆìŒ.  
í•¨ìˆ˜ ê°ì²´ì˜ ì†ì„±ì„ ì§ì ‘ ë‹¤ë£¨ëŠ” ê²ƒë³´ë‹¤ ë” ê¹”ë”í•˜ê³  ì¬ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.

### âœ… ì˜ˆì œ: í˜¸ì¶œ íšŸìˆ˜ ì¶”ì  ë°ì½”ë ˆì´í„°
```python
def call_counter(func):
    func.count = 0

    def wrapper(*args, **kwargs):
        func.count += 1
        print(f"Call #{func.count}")
        return func(*args, **kwargs)

    return wrapper

@call_counter
def greet(name):
    print(f"Hello, {name}!")

greet("JungHwan")
greet("Python")
print(greet.__wrapped__.__dict__)  # {'count': 2}
```

## ğŸ§ª ì‹¤ë¬´ í™œìš©: ë¡œê¹… ë°ì½”ë ˆì´í„°
```python
def logger(func):
    def wrapper(*args, **kwargs):
        print(f"[LOG] Calling {func.__name__} with args={args}, kwargs={kwargs}")
        return func(*args, **kwargs)
    return wrapper

@logger
def process_data(data):
    print(f"Processing {data}")

process_data({"id": 1, "value": 42})
```

### ì¶œë ¥ ê²°ê³¼
```
[LOG] Calling process_data with args=({'id': 1, 'value': 42},), kwargs={}
Processing {'id': 1, 'value': 42}
```

#### ğŸ” ì„¤ëª…
- ì²« ë²ˆì§¸ ì¤„ì€ logger ë°ì½”ë ˆì´í„°ê°€ ì¶œë ¥í•˜ëŠ” ë¡œê·¸ ë©”ì‹œì§€ì…ë‹ˆë‹¤.
- func.__name__ â†’ "process_data"
- args â†’ ({'id': 1, 'value': 42},)
- kwargs â†’ {}
- ë‘ ë²ˆì§¸ ì¤„ì€ process_data í•¨ìˆ˜ ë³¸ë¬¸ì—ì„œ ì¶œë ¥í•˜ëŠ” ë‚´ìš©ì…ë‹ˆë‹¤.
- print(f"Processing {data}") â†’ Processing {'id': 1, 'value': 42}

## ğŸ”š ë§ˆë¬´ë¦¬ ìš”ì•½

| ë°©ì‹           | ì¥ì                               | ë‹¨ì                               | ì¶”ì²œ ìš©ë„                         |
|----------------|-----------------------------------|-----------------------------------|-----------------------------------|
| í•¨ìˆ˜ ê°ì²´ ì†ì„± | ê°„ë‹¨í•˜ê³  ë¹ ë¥´ê²Œ êµ¬í˜„ ê°€ëŠ¥          | ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€, ë¶€ì‘ìš© ê°€ëŠ¥       | ì‹¤í—˜ì  ì½”ë“œ, ê°„ë‹¨í•œ ìƒíƒœ ì €ì¥     |
| í´ë˜ìŠ¤         | êµ¬ì¡°ì , í™•ì¥ì„± ë›°ì–´ë‚¨              | ì½”ë“œ ì–‘ ì¦ê°€                       | ì‹¤ë¬´ ë¡œì§, API, ê³„ì‚°ê¸° ë“±         |
| ë°ì½”ë ˆì´í„°     | ì¬ì‚¬ìš© ê°€ëŠ¥, í•¨ìˆ˜ ì™¸ë¶€ì—ì„œ ì œì–´ ê°€ëŠ¥ | ë³µì¡í•œ ë¡œì§ì€ ê´€ë¦¬ ì–´ë ¤ì›€          | ë¡œê¹…, ì¶”ì , ì¸ì¦, ìºì‹± ë“±         |

---

# í´ë¡œì €(closure)

í•¨ìˆ˜ ê°ì²´ì˜ ì†ì„±ì²˜ëŸ¼ ìƒíƒœë¥¼ ì €ì¥í•˜ëŠ” ë°©ì‹ì€ ê°„ë‹¨í•˜ì§€ë§Œ,  
**í´ë¡œì €(closure)** ë¥¼ ì‚¬ìš©í•˜ë©´ ë” ì•ˆì „í•˜ê³  ìº¡ìŠí™”ëœ ë°©ì‹ìœ¼ë¡œ ìƒíƒœë¥¼ ìœ ì§€í•  ìˆ˜ ìˆìŒ.  
ì•„ë˜ì— í´ë¡œì €ì˜ ê°œë…ê³¼ ì‹¤ìš©ì ì¸ ì˜ˆì œë¥¼ ì •ë¦¬.

## ğŸ§  í´ë¡œì €(Closure)ë€?
í´ë¡œì €ëŠ” í•¨ìˆ˜ ë‚´ë¶€ì— ì •ì˜ëœ í•¨ìˆ˜ê°€ ë°”ê¹¥ í•¨ìˆ˜ì˜ ì§€ì—­ ë³€ìˆ˜ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤.  
ì¦‰, ì™¸ë¶€ í•¨ìˆ˜ì˜ ìƒíƒœë¥¼ ë‚´ë¶€ í•¨ìˆ˜ê°€ ê¸°ì–µí•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ ê°ì²´.


## âœ… íŠ¹ì§•
- ì™¸ë¶€ í•¨ìˆ˜ê°€ ì¢…ë£Œë˜ì–´ë„ ë‚´ë¶€ í•¨ìˆ˜ëŠ” ì™¸ë¶€ ë³€ìˆ˜ì— ì ‘ê·¼ ê°€ëŠ¥
- ìƒíƒœë¥¼ ì€ë‹‰í•˜ê³  ìœ ì§€í•  ìˆ˜ ìˆì–´ ì•ˆì „í•¨
- ê°ì²´ì²˜ëŸ¼ ë™ì‘í•˜ì§€ë§Œ í´ë˜ìŠ¤ë³´ë‹¤ ê°€ë³ê³  ê°„ê²°í•¨

## ğŸ§ª ê¸°ë³¸ í´ë¡œì € ì˜ˆì œ: ëˆ„ì  í•© ê³„ì‚°ê¸°
```python
def make_accumulator():
    total = 0

    def add(x):
        nonlocal total
        total += x
        return total

    return add

acc = make_accumulator()
print(acc(10))  # 10
print(acc(5))   # 15
print(acc(3))   # 18

```

ğŸ” ì„¤ëª…
- totalì€ make_accumulatorì˜ ì§€ì—­ ë³€ìˆ˜
- add í•¨ìˆ˜ëŠ” totalì„ ê¸°ì–µí•˜ê³  ê³„ì† ëˆ„ì 
- **nonlocal** í‚¤ì›Œë“œëŠ” ë‚´ë¶€ í•¨ìˆ˜ì—ì„œ ì™¸ë¶€ ë³€ìˆ˜ ìˆ˜ì • ê°€ëŠ¥í•˜ê²Œ í•¨

ğŸ’¼ ì‹¤ë¬´ ì˜ˆì œ 1: API í˜¸ì¶œ íšŸìˆ˜ ì¶”ì ê¸°
```python
def api_counter():
    count = 0

    def call(endpoint):
        nonlocal count
        count += 1
        print(f"[{count}] Calling {endpoint}")

    return call

api = api_counter()
api("/users")  # [1] Calling /users
api("/posts")  # [2] Calling /posts

```

##  ğŸ’¼ ì‹¤ë¬´ ì˜ˆì œ 2: ì œí•œëœ í˜¸ì¶œ íšŸìˆ˜ í•¨ìˆ˜
```rust
def limited_executor(limit):
    count = 0

    def execute(task):
        nonlocal count
        if count < limit:
            count += 1
            print(f"Executing: {task}")
        else:
            print("Limit reached!")

    return execute

run = limited_executor(3)
run("Task A")  # Executing: Task A
run("Task B")  # Executing: Task B
run("Task C")  # Executing: Task C
run("Task D")  # Limit reached!
```

## ğŸ” í´ë¡œì € vs í´ë˜ìŠ¤ ë¹„êµ ìš”ì•½
| í•­ëª©       | í´ë¡œì €                             | í´ë˜ìŠ¤                             | ë¹„ê³                              |
|------------|------------------------------------|-------------------------------------|----------------------------------|
| êµ¬ì¡°       | í•¨ìˆ˜ ë‚´ë¶€ì— í•¨ìˆ˜ ì •ì˜               | ëª…ì‹œì  í´ë˜ìŠ¤ êµ¬ì¡°                  | í´ë¡œì €ëŠ” í•¨ìˆ˜í˜•, í´ë˜ìŠ¤ëŠ” ê°ì²´ì§€í–¥ |
| ìƒíƒœ ì €ì¥  | ì™¸ë¶€ í•¨ìˆ˜ì˜ ì§€ì—­ ë³€ìˆ˜              | ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜                       | `nonlocal` í‚¤ì›Œë“œë¡œ ìƒíƒœ ìœ ì§€     |
| ìº¡ìŠí™”     | ê°•ë ¥ (ì™¸ë¶€ì—ì„œ ì§ì ‘ ì ‘ê·¼ ë¶ˆê°€)     | ê°€ëŠ¥í•˜ì§€ë§Œ ì ‘ê·¼ ì œì–´ëŠ” ì•½í•¨         | í´ë¡œì €ëŠ” ì€ë‹‰ì„±ì´ ë›°ì–´ë‚¨          |
| ì‚¬ìš© ìš©ë„  | ê°„ë‹¨í•œ ìƒíƒœ ì¶”ì , ì¼íšŒì„± ë¡œì§      | ë³µì¡í•œ ë¡œì§, ë‹¤ì¤‘ ë©”ì„œë“œ í•„ìš” ì‹œ    | ìƒí™©ì— ë”°ë¼ ì„ íƒ                  |

í´ë¡œì €ëŠ” íŠ¹íˆ í•¨ìˆ˜í˜• ìŠ¤íƒ€ì¼ì˜ ì½”ë“œ, ê°„ë‹¨í•œ ìƒíƒœ ì¶”ì , ì½œë°± í•¨ìˆ˜ ìƒì„± ë“±ì— ë§¤ìš° ìœ ìš©.

----

# ë³€ìˆ˜ ì†Œë©¸

def limited_executor(limit):
    count = 0

- ê²°ë¡ ë¶€í„° ë§í•˜ë©´, í´ë¡œì €ì—ì„œ ì‚¬ìš©ëœ ë³€ìˆ˜ countëŠ” ì™¸ë¶€ í•¨ìˆ˜ limited_executorê°€ ì†Œë©¸ë˜ë”ë¼ë„ ë‚´ë¶€ í•¨ìˆ˜ê°€ ì‚´ì•„ ìˆëŠ” í•œ í•¨ê»˜ ì†Œë©¸ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

## ğŸ” ì™œ ê·¸ëŸ°ê°€ìš”?
í´ë¡œì €ëŠ” ì™¸ë¶€ í•¨ìˆ˜ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸(ì§€ì—­ ë³€ìˆ˜ ë“±)ë¥¼ ë‚´ë¶€ í•¨ìˆ˜ê°€ ìº¡ì²˜(capture)í•´ì„œ ê¸°ì–µí•˜ëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤.
ì¦‰, limited_executor í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ê³  ë‚˜ë©´ countëŠ” ì‚¬ë¼ì§€ëŠ” ê²Œ ì•„ë‹ˆë¼, ë‚´ë¶€ í•¨ìˆ˜ executeê°€ ìì‹ ì˜ í™˜ê²½ìœ¼ë¡œ countë¥¼ ëŒì–´ì•ˆê³  ì‚´ì•„ê°‘ë‹ˆë‹¤.
```python
def limited_executor(limit):
    count = 0

    def execute(task):
        nonlocal count
        if count < limit:
            count += 1
            print(f"Executing: {task}")
        else:
            print("Limit reached!")

    return execute
```

### ì‹¤í–‰ ì˜ˆì‹œ
```python
run = limited_executor(3)
run("A")  # count = 1
run("B")  # count = 2
run("C")  # count = 3
run("D")  # count = 3 â†’ "Limit reached!"
```

- limited_executorëŠ” í˜¸ì¶œ í›„ ì‚¬ë¼ì§€ì§€ë§Œ,
- runì€ executeë¥¼ ì°¸ì¡°í•˜ê³  ìˆê³ ,
- executeëŠ” countë¥¼ ìê¸° í´ë¡œì € í™˜ê²½ì— ì €ì¥í•˜ê³  ìˆì–´ì„œ ê³„ì† ìœ ì§€ë©ë‹ˆë‹¤.

## ğŸ§  ë©”ëª¨ë¦¬ ê´€ì ì—ì„œ
- countëŠ” run í•¨ìˆ˜ ê°ì²´ì˜ í´ë¡œì € í™˜ê²½ì— í¬í•¨ëœ ë³€ìˆ˜ì…ë‹ˆë‹¤.
- run.__closure__ë¥¼ í™•ì¸í•˜ë©´ countê°€ ì €ì¥ëœ ì…€(cell)ì„ ë³¼ ìˆ˜ ìˆì–´ìš”.

```python
print(run.__closure__[0].cell_contents)  # ì¶œë ¥: í˜„ì¬ count ê°’
```

## âœ… í´ë¡œì € êµ¬ì¡° ìš”ì•½

| ë³€ìˆ˜/í•¨ìˆ˜ | í¬í•¨ ê´€ê³„ | ì„¤ëª…                          |
|-----------|------------|-------------------------------|
| count     | execute     | `execute` í•¨ìˆ˜ê°€ `count`ë¥¼ ìº¡ì²˜í•¨ |
| execute   | run         | `run`ì€ `execute`ë¥¼ ì°¸ì¡°í•¨       |
| count     | run         | `run`ì´ ì‚´ì•„ ìˆëŠ” ë™ì•ˆ `count`ë„ ìœ ì§€ë¨ |

---






