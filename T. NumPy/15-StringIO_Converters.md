# np.genfromtxt â€” converters ì˜µì…˜ í•µì‹¬ ì •ë¦¬

## âœ… 1. ê¸°ë³¸ ë™ì‘ â€” ë³€í™˜ ì—†ì´ ì½ê¸°
data = u'1, 2.3%, 45.\n6, 78.9%, 0'
names = ("i", "p", "n")
a = np.genfromtxt(StringIO(data), delimiter=",", names=names)


## ğŸ” ê²°ê³¼:
```
[(1., nan, 45.) (6., nan,  0.)]
```

- %ê°€ í¬í•¨ëœ ë¬¸ìì—´ì€ ë³€í™˜ ì‹¤íŒ¨ â†’ nan ì²˜ë¦¬ë¨
- convertersë¥¼ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ ìë™ íŒŒì‹±ë§Œ ìˆ˜í–‰ë¨


---

## ê²°ê³¼ ê²€ì¦

ê²°ê³¼ê°€ [(1., nan, 45.), (6., nan, 0.)]ê°€ ë‚˜ì˜¤ëŠ”ì§€ ì ˆì°¨ì ìœ¼ë¡œ ì„¤ëª…í•œ ê±°ì•¼.

## âœ… ì½”ë“œ ë¶„ì„: ë³€í™˜ ì—†ì´ ì½ê¸°
```python
from io import StringIO
import numpy as np

data = u'1, 2.3%, 45.\n6, 78.9%, 0'
names = ("i", "p", "n")
a = np.genfromtxt(StringIO(data), delimiter=",", names=names)
```


## ğŸ” ë™ì‘ ì ˆì°¨ â€” ë³€í™˜ ì—†ì´ ì½ê¸°
| ë‹¨ê³„              | ì„¤ëª…                                       |
|-------------------|--------------------------------------------|
| StringIO(data)    | ë¬¸ìì—´ì„ íŒŒì¼ì²˜ëŸ¼ ì½ì„ ìˆ˜ ìˆë„ë¡ ë˜í•‘í•¨     |
| delimiter=","     | ì‰¼í‘œ ê¸°ì¤€ìœ¼ë¡œ ì—´ì„ ë‚˜ëˆ”                    |
| names=("i", "p", "n") | ê° ì—´ì— ì´ë¦„ ë¶€ì—¬: i, p, n               |
| ë³€í™˜ ì‹œë„          | "2.3%" â†’ float ë³€í™˜ ì‹¤íŒ¨ â†’ nan ì²˜ë¦¬ë¨      |


## ğŸ“˜ ë‚´ë¶€ ì²˜ë¦¬ íë¦„ â€” ë³€í™˜ ì—†ì´ ì½ê¸°
| ì›ë³¸ í–‰             | ì—´ ë¶„í•  ê²°ê³¼             | ë³€í™˜ ê²°ê³¼ (float ì‹œë„)     |
|---------------------|--------------------------|-----------------------------|
| '1, 2.3%, 45.'      | '1' '2.3%' '45.'         | 1.0   nan   45.0            |
| '6, 78.9%, 0'       | '6' '78.9%' '0'          | 6.0   nan    0.0            |

- 2.3%ì™€ 78.9%ëŠ” % ë•Œë¬¸ì— float ë³€í™˜ ì‹¤íŒ¨ â†’ nan ë°œìƒ
- ë‚˜ë¨¸ì§€ ìˆ«ìëŠ” ì •ìƒì ìœ¼ë¡œ floatìœ¼ë¡œ ë³€í™˜ë¨

## âœ… ìµœì¢… ê²°ê³¼
array([(1., nan, 45.), (6., nan, 0.)],
      dtype=[('i', '<f8'), ('p', '<f8'), ('n', '<f8')])


- êµ¬ì¡°í™” ë°°ì—´ í˜•íƒœ
- ê° ì—´ì€ ì´ë¦„ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥:
a['i'] â†’ array([1., 6.])
a['p'] â†’ array([nan, nan])
a['n'] â†’ array([45., 0.])

## ğŸ” ì„¤ëª…
- delimiter="," â†’ ì‰¼í‘œ ê¸°ì¤€ìœ¼ë¡œ ì—´ ë¶„í• 
- ê° í•„ë“œëŠ” float()ìœ¼ë¡œ ìë™ ë³€í™˜ ì‹œë„
- "2.3%", "78.9%"ëŠ” float() ë³€í™˜ ì‹¤íŒ¨ â†’ nan ì²˜ë¦¬ë¨
- ë‚˜ë¨¸ì§€ "1", "45.", "6", "0"ì€ ì •ìƒì ìœ¼ë¡œ ë³€í™˜ë¨

## floatë¡œ ë³€í™˜ì„ ì‹œë„í•˜ëŠ” ì´ìœ 
np.genfromtxt()ê°€ ë°ì´í„°ë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ floatìœ¼ë¡œ ë³€í™˜í•˜ë ¤ê³  ì‹œë„í•˜ëŠ” ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë‚´ë¶€ ë™ì‘ ì›ì¹™ ë•Œë¬¸.

## âœ… ë³€í™˜ ê¸°ì¤€ì˜ ê·¼ê±°
## 1. ê¸°ë³¸ dtypeì€ float
- np.genfromtxt()ëŠ” ëª…ì‹œì ìœ¼ë¡œ dtypeì„ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ì ìœ¼ë¡œ floatìœ¼ë¡œ ë°ì´í„°ë¥¼ ì½ìœ¼ë ¤ê³  í•¨.
- ì´ëŠ” ëŒ€ë¶€ë¶„ì˜ ìˆ˜ì¹˜ ë°ì´í„°ê°€ ì‹¤ìˆ˜í˜•ì´ê¸° ë•Œë¬¸ì— ë²”ìš©ì„±ì„ ê³ ë ¤í•œ ê¸°ë³¸ ì„¤ì •ì´ì•¼.
```python
np.genfromtxt(StringIO("1 2 3\n4 5 6"))
â†’ array([[1., 2., 3.],
         [4., 5., 6.]])
```

- ìœ„ì²˜ëŸ¼ ì•„ë¬´ ì˜µì…˜ ì—†ì´ ì½ìœ¼ë©´ ìë™ìœ¼ë¡œ float64ë¡œ ì²˜ë¦¬ë¨

## 2. ê²°ì¸¡ê°’(nan) ì²˜ë¦¬ë¥¼ ìœ„í•´ floatì´ í•„ìš”í•¨
- np.genfromtxt()ëŠ” ê²°ì¸¡ê°’ì„ nanìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ”ë°, nanì€ float íƒ€ì…ì—ì„œë§Œ í‘œí˜„ ê°€ëŠ¥í•´
- ê·¸ë˜ì„œ ê¸°ë³¸ì ìœ¼ë¡œ floatì„ ì‚¬ìš©í•´ì•¼ ê²°ì¸¡ê°’ì„ ì•ˆì „í•˜ê²Œ í‘œí˜„í•  ìˆ˜ ìˆì–´
```python
np.genfromtxt(StringIO("1, , 3\n4, 5, 6"), delimiter=",")
â†’ array([[ 1., nan,  3.],
         [ 4.,  5.,  6.]])
```


## 3. ìë™ íƒ€ì… ì¶”ë¡ ì´ ì—†ìŒ
- n
p.genfromtxt()ëŠ” pandas.read_csv()ì²˜ëŸ¼ ìë™ìœ¼ë¡œ íƒ€ì…ì„ ì¶”ë¡ í•˜ì§€ ì•ŠìŒ
- ëŒ€ì‹  ëª¨ë“  í•„ë“œë¥¼ ë™ì¼í•œ íƒ€ì…ìœ¼ë¡œ ì²˜ë¦¬í•˜ë ¤ê³  ì‹œë„í•¨ â†’ ê¸°ë³¸ì€ float

## ğŸ” ìš”ì•½ í‘œ
| ë™ì‘ ì›ë¦¬             | ì„¤ëª…                                       |
|------------------------|--------------------------------------------|
| ê¸°ë³¸ dtype             | ëª…ì‹œí•˜ì§€ ì•Šìœ¼ë©´ float64ë¡œ ì²˜ë¦¬ë¨           |
| ê²°ì¸¡ê°’ ì²˜ë¦¬            | nan í‘œí˜„ì„ ìœ„í•´ float íƒ€ì…ì´ í•„ìš”í•¨        |
| ìë™ íƒ€ì… ì¶”ë¡  ì—†ìŒ    | ëª¨ë“  ì—´ì„ ë™ì¼í•œ íƒ€ì…ìœ¼ë¡œ ì²˜ë¦¬í•˜ë ¤ê³  í•¨     |




## âœ… 2. ì—´ ì¸ë±ìŠ¤ ê¸°ë°˜ ë³€í™˜ â€” converters={1: func}
```python
convert_func = lambda x: float(x.strip("%")) / 100.0
b = np.genfromtxt(StringIO(data), delimiter=",", names=names, converters={1: convert_func})
```

### ğŸ” ê²°ê³¼:
```
[(1., 0.023, 45.) (6., 0.789,  0.)]
```

- converters={1: func} â†’ ë‘ ë²ˆì§¸ ì—´(ì¸ë±ìŠ¤ 1)ì—ë§Œ ë³€í™˜ í•¨ìˆ˜ ì ìš©
- % ì œê±° í›„ ë°±ë¶„ìœ¨ â†’ ì‹¤ìˆ˜ë¡œ ë³€í™˜

### âœ… 3. ì—´ ì´ë¦„ ê¸°ë°˜ ë³€í™˜ â€” converters={"p": func}
```python
c = np.genfromtxt(StringIO(data), delimiter=",", names=names, converters={"p": convert_func})
```

### ğŸ” ê²°ê³¼:
```
[(1., 0.023, 45.) (6., 0.789,  0.)]
```

- converters={"p": func} â†’ ì—´ ì´ë¦„ "p"ì— ì§ì ‘ ì ìš©
- ì´ë¦„ ê¸°ë°˜ ì ‘ê·¼ì€ êµ¬ì¡°í™” ë°°ì—´ì—ì„œ ë” ì§ê´€ì 

### âœ… 4. ê²°ì¸¡ê°’ ì²˜ë¦¬ â€” ê³µë°±ì„ ê¸°ë³¸ê°’ìœ¼ë¡œ ëŒ€ì²´
```python
data = u'1,  , 3\n 4, 5, 6'
convert_func = lambda x: float(x.strip() or -999)
e = np.genfromtxt(StringIO(data), delimiter=",", converters={1: convert_func})
```

###ğŸ” ê²°ê³¼:
```
[[   1. -999.    3.]
 [   4.    5.    6.]]
```

- ê³µë°± ë¬¸ìì—´ â†’ x.strip()ì€ ë¹ˆ ë¬¸ìì—´
- or -999 â†’ ë¹ˆ ë¬¸ìì—´ì¼ ê²½ìš° -999ë¡œ ëŒ€ì²´
- ì‹¤ë¬´ì—ì„œ ê²°ì¸¡ê°’ì„ íŠ¹ì • ìˆ«ìë¡œ ì±„ìš¸ ë•Œ ìœ ìš©

## ğŸ’¡ ì‹¤ë¬´ íŒ ìš”ì•½ â€” np.genfromtxt converters í™œìš©
| ê¸°ë²•                    | ê¸°ëŠ¥ ì„¤ëª…                          | ì‹¤ë¬´ í™œìš© ì˜ˆì‹œ                        |
|-------------------------|-------------------------------------|---------------------------------------|
| converters={i: f}       | ì—´ ì¸ë±ìŠ¤ ê¸°ë°˜ ë³€í™˜ í•¨ìˆ˜ ì§€ì •       | 1ë²ˆì§¸ ì—´ì˜ í¼ì„¼íŠ¸ ë¬¸ìì—´ ì²˜ë¦¬         |
| converters={"name": f}  | ì—´ ì´ë¦„ ê¸°ë°˜ ë³€í™˜ í•¨ìˆ˜ ì§€ì •         | "p" ì—´ì˜ ë¬¸ìì—´ â†’ ì‹¤ìˆ˜ ë³€í™˜           |
| lambda x: x or default  | ê²°ì¸¡ê°’ ì²˜ë¦¬ìš© ëŒë‹¤ í•¨ìˆ˜             | ê³µë°± â†’ -999 ê°™ì€ ê¸°ë³¸ê°’ìœ¼ë¡œ ëŒ€ì²´      |
| strip()                 | ë¬¸ìì—´ ì „ì²˜ë¦¬ (ê³µë°±/ê¸°í˜¸ ì œê±°)      | `" 78.9% "` â†’ `"78.9"` â†’ `0.789`      |

## ğŸ’¬ í•œë§ˆë””
convertersëŠ” np.genfromtxt()ë¥¼  
í…ìŠ¤íŠ¸ ì „ì²˜ë¦¬ ë„êµ¬ë¡œ í™•ì¥ì‹œì¼œì£¼ëŠ” í•µì‹¬ ì˜µì…˜ì´ì•¼.  
íŠ¹íˆ %, ê³µë°±, ë‹¨ìœ„ ê°™ì€ ë¹„ì •í˜• ë°ì´í„°ë¥¼  
ê¹”ë”í•˜ê²Œ ìˆ«ìë¡œ ë°”ê¿”ì£¼ëŠ” ë° ì •ë§ ìœ ìš©í•˜ì§€. 
